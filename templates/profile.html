{% extends 'base.html' %}
{% load static %}
{% block title %}
KM Healing Foundation -Profile
{% endblock %}
{% block styles %}
<style>
  body {
    background-color: #f6fbf8;
  }

  .sidebar-button {
    transition: background-color 0.3s, color 0.3s;
  }

  .sidebar-button:hover {
    background-color: #205A28;
    color: #fbfbfb;
  }

  .active {
    background-color: #205A28;
    color: #f6f6f6;
  }

  body {
    font-family: 'Inter', sans-serif;
  }

  h1,
  h2 {
    font-family: 'Playfair Display', serif;
  }

  .text-gold {
    color: #FFD700;
    /* Gold color */
  }

  .border-gold {
    border-color: #FFD700;
    /* Gold border */
  }
</style>
{% endblock %}

{% block content %}
<div class="bg-[#F4F4F4] text-gray-700">
  <!-- Floating Menu Button -->
  <div class="absolute top-4 left-4 z-50 md:hidden">
    <button id="menuButton" class="p-2 bg-white rounded shadow-lg focus:outline-none">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
        class="w-6 h-6 text-gray-800">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16m-7 6h7" />
      </svg>
    </button>
  </div>

  <div class="flex min-h-screen">
    <!-- Sidebar -->
    <aside id="sidebar"
      class="w-64 bg-white shadow-lg fixed inset-y-0 left-0 transform -translate-x-full md:translate-x-0 md:static transition-transform z-40">
      <div class="p-6">
        <div class="text-center">
          <img src="{% static 'image/userprofile.jpg' %}" alt="User Avatar" class="w-24 h-24 mx-auto rounded-full">
          <h2 class="mt-4 text-xl font-semibold text-gray-800">{{ user.username }}</h2>
          <p class="text-gray-500">{{ user.get_full_name }}</p>
        </div>
        <div class="mt-5 bg-[#E5F7ED] rounded-lg p-2 shadow-md">
          <ul class="mt-6 space-y-4">
            <li>
              <button onclick="showSection('details')"
                class="block w-full px-4 py-2 text-left sidebar-button text-gray-700 rounded">Personal Details</button>
            </li>
            <li>
              <button onclick="showSection('services')"
                class="block w-full px-4 py-2 text-left sidebar-button text-gray-700 rounded">Services Opted</button>
            </li>
            <li>
              <button onclick="showSection('payment-status')"
                class="block w-full px-4 py-2 text-left sidebar-button text-gray-700 rounded">Payment Status</button>
            </li>
            <li>
              <button onclick="showSection('order-history')"
                class="block w-full px-4 py-2 text-left sidebar-button text-gray-700 rounded">Order History</button>
            </li>
          </ul>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 p-8">
      <!-- Sections -->
      <section id="details" class="content-section mb-8 bg-[#E1F5EA] shadow p-6 rounded-lg hidden">
        <h2 class="text-lg font-semibold border-b pb-2 text-gray-800">Personal Details</h2>
        <div class="mt-4">
          <p><span class="font-medium text-gray-600">Username:</span> {{ user.username }} </p>
          <p><span class="font-medium text-gray-600">Name:</span> {{ user.get_full_name }}</p>
          <p><span class="font-medium text-gray-600">Email:</span> {{ user.email }}</p>
        </div>
      </section>



      <section id="services" class="content-section mb-8 bg-[#E1F5EA] shadow p-6 rounded-lg hidden">
        <h2 class="text-2xl font-bold text-[#205A28] border-b pb-4 mb-6">Booking History</h2>
        <ul class="space-y-4">
          {% for booking in bookings %}
          <li class="border-b pb-4">
            <h3 class="font-medium">{{ booking.first_name }} {{ booking.last_name }}</h3>
            <p>Email: {{ booking.email }}</p>
            <p>Phone: {{ booking.phone }}</p>
            <p>Gender: {{ booking.gender }}</p>
            <p>Date of Birth: {{ booking.date_of_birth }}</p>
            <p>Age: {{ booking.age }}</p>
            <P>Session Name: {{ booking.service_title }}</P>
            <p>Duration: {{ booking.service_duration }}</p>
            <p>Mode of Service: {{ booking.service_mode }}</p>
            <p>Location: {{ booking.service_location }}</p>
            <p>Instructor: {{ booking.service_instructor }}</p>
            <p>Session Date: From {{ booking.service_date_from|date:"F j, Y" }} to {{ booking.service_date_to|date:"F j,
              Y" }}</p>
            <p>Time: From {{ booking.service_time_from|time:"g:i A" }} to {{ booking.service_time_to|time:"g:i A" }}
            </p>
            <p><strong>Price:</strong> â‚¹{{ booking.service_price }}</p>
            <p>Booked on: {{ booking.created_at }}</p>
          </li>
          {% empty %}
          <p>No bookings found.</p>
          {% endfor %}

        </ul>
      </section>



      <section id="payment-status" class="content-section mb-8 bg-[#E1F5EA] shadow p-6 rounded-lg hidden">
        <h2 class="text-lg font-semibold border-b pb-2 text-gray-800">Payment Status</h2>
        <div class="mt-4">
          <p><span class="font-medium text-gray-600">Total Amount Paid:</span> No data found</p>
          <p><span class="font-medium text-gray-600">Outstanding Balance:</span> No data found</p>
        </div>
      </section>

      <section id="order-history" class="content-section bg-[#E1F5EA] shadow p-6 rounded-lg hidden">
        <h2 class="text-lg font-semibold border-b pb-2 text-gray-800">Order History</h2>
        <table class="w-full mt-4 border">
          <thead>
            <tr class="bg-gray-200 text-left">
              <th class="py-2 px-4">Order ID</th>
              <th class="py-2 px-4">Service</th>
              <th class="py-2 px-4">Date</th>
              <th class="py-2 px-4">Status</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="py-2 px-4">No data found</td>
              <td class="py-2 px-4">No data found</td>
              <td class="py-2 px-4">No data found</td>
              <td class="py-2 px-4">No data found</td>
            </tr>
            <tr>
              <td class="py-2 px-4"></td>
              <td class="py-2 px-4">No data found</td>
              <td class="py-2 px-4">No data found</td>
              <td class="py-2 px-4">No data found</td>
            </tr>
          </tbody>
        </table>
      </section>
    </main>
  </div>
</div>
{% endblock %}

{% block scripts %}

<script>
  const sidebar = document.getElementById('sidebar');
  // Toggle sidebar visibility
  menuButton.addEventListener('click', () => {
    sidebar.classList.toggle('-translate-x-full');
  });

  function showSection(sectionId) {
    // Hide all sections
    document.querySelectorAll('.content-section').forEach(section => section.classList.add('hidden'));

    // Show the selected section
    document.getElementById(sectionId).classList.remove('hidden');

    // Update button states
    document.querySelectorAll('.sidebar-button').forEach(button => button.classList.remove('active'));
    document.querySelector(`[onclick="showSection('${sectionId}')"]`).classList.add('active');
  }

  // Show the first section by default
  showSection('details');
</script>
{% endblock %}