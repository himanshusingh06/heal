make finctionality for user profile----done
make functioality for admin to add services------done 
make functionality foradmin to see all the booking details----------done
make functionality for user to download details of all the bookings
intgerate payment gateway functionality
otp validation for email 
display booking and download booking report





review the add edit service functionality------done
   add selected service for the serbooking table services are not correctly being added---------------------done
   and hence not rendered to the admin--------------done



otp validation for email 
intgerate payment gateway functionality
display booking and download booking report

feedback


testimonials

















@login_required(login_url='login')
@user_passes_test(is_admin)

def manage_services(request):
    message = None
    if request.method == "POST":
        action = request.POST.get("action")
        try:
            if action == "add":
                # Add a new service
                service = Service(
                    title=request.POST.get("title"),
                    description=request.POST.get("description"),
                    duration=request.POST.get("duration"),
                    mode_of_service=request.POST.get("mode_of_service"),
                    from_date=request.POST.get("from_date"),
                    to_date=request.POST.get("to_date"),
                    time_from=request.POST.get("time_from"),
                    time_to=request.POST.get("time_to"),
                    location=request.POST.get("location"),
                    instructor=request.POST.get("instructor"),
                    price=request.POST.get("price"),
                )
                if 'image' in request.FILES:
                    service.image = request.FILES['image']
                service.save()
                message = "Service added successfully!"

            elif action == "edit":
                # Edit an existing service
                service_id = request.POST.get("service_id")
                service = get_object_or_404(Service, id=service_id)
                service.title = request.POST.get("title")
                service.description = request.POST.get("description")
                service.duration = request.POST.get("duration")
                service.mode_of_service = request.POST.get("mode_of_service")
                service.from_date = request.POST.get("from_date")
                service.to_date = request.POST.get("to_date")
                service.time_from = request.POST.get("time_from")
                service.time_to = request.POST.get("time_to")
                service.location = request.POST.get("location")
                service.instructor = request.POST.get("instructor")
                service.price = request.POST.get("price")
                if 'image' in request.FILES:
                    service.image = request.FILES['image']
                service.save()
                message = "Service updated successfully!"

            elif action == "delete":
                # Delete a service
                service_id = request.POST.get("service_id")
                service = get_object_or_404(Service, id=service_id)
                service.delete()
                message = "Service deleted successfully!"

            else:
                message = "Invalid action."

        except Exception as e:
            message = f"An error occurred: {str(e)}"

    services = Service.objects.all()
    return render(request, 'manage_services.html', {'services': services, 'message': message})





hey just modify this manage services views so that to create seperate views functions for the add delete and edit functioality





and also help to modify this template accordingly so as to render different forms for edit and add and forward them to different routes according on add or edit  or delete the data and the code is too congested just give it to me with clear documentation and show the forms on a button click



<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Services</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-green-600 text-white p-4 shadow">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-bold">Manage Services</h1>
            <nav>
                <a href="{% url 'admin_dashboard' %}" class="text-white hover:underline">Back to Dashboard</a>
            </nav>
        </div>
    </header>
    {% if messages %}
    <div>
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
                {{ message }}
            </div>
        {% endfor %}
    </div>
{% endif %}

    <!-- Main Content -->
    <main class="container mx-auto p-6">
        <h1 class="text-4xl font-extrabold text-gray-800 mb-6">Manage Services</h1>

        <!-- Existing Services -->
        <section class="mb-8">
            <h2 class="text-2xl font-semibold text-gray-700 mb-4">Existing Services</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                {% for service in services %}
                <div class="bg-white shadow-lg rounded-lg p-4">
                    <img src="{{ service.image.url }}" alt="{{ service.title }}"
                        class="rounded-t-lg object-cover w-full h-40">
                    <h3 class="text-xl font-bold text-gray-700 mt-4">{{ service.title }}</h3>
                    <p class="text-gray-600 mt-2">{{ service.description }}</p>
                    <p class="text-gray-600">Duration: {{ service.duration }}</p>
                    <p class="text-gray-600">Mode: {{ service.mode_of_service }}</p>
                    <p class="text-gray-600">Location: {{ service.location }}</p>
                    <p class="text-gray-600">Instructor: {{ service.instructor }}</p>
                    <p class="text-gray-600">Price: ${{ service.price }}</p>
                    <p class="text-gray-600">Date: {{ service.from_date }} - {{ service.to_date }}</p>
                    <p class="text-gray-600">Time: {{ service.time_from }} - {{ service.time_to }}</p>
                    <div class="flex justify-between items-center mt-4">
                        <!-- Delete Button -->
                        <form action="" method="POST" class="inline-block">
                            {% csrf_token %}
                            <input type="hidden" name="action" value="delete">
                            <input type="hidden" name="service_id" value="{{ service.id }}">
                            <button type="submit"
                                class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition">
                                Delete
                            </button>
                        </form>
                        <!-- Edit Button -->
                        <button onclick="editService({{ service.id }}, '{{ service.title }}', '{{ service.description }}', '{{ service.duration }}', '{{ service.mode_of_service }}', '{{ service.from_date }}', '{{ service.to_date }}', '{{ service.time_from }}', '{{ service.time_to }}', '{{ service.location }}', '{{ service.instructor }}', '{{ service.price }}')"
                            class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition">
                            Edit
                        </button>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>

        <!-- Add/Edit Service Form -->
        <section class="bg-white shadow-lg rounded-lg p-6">
            <h2 class="text-2xl font-semibold text-gray-700 mb-4">Add / Edit Service</h2>
            <form action="" method="POST" enctype="multipart/form-data" id="serviceForm">
                {% csrf_token %}
                <input type="hidden" name="action" id="action" value="add">
                <input type="hidden" name="service_id" id="service_id">

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
                    <!-- Title -->
                    <div>
                        <label for="title" class="block font-medium text-gray-700">Title</label>
                        <input type="text" name="title" id="title" required
                            class="w-full bg-gray-50 border-2 border-gray-300 rounded-lg px-4 py-2 focus:ring focus:ring-blue-200 focus:border-blue-500">
                    </div>

                    <!-- Description -->
                    <div class="md:col-span-2">
                        <label for="description" class="block font-medium text-gray-700">Description</label>
                        <textarea name="description" id="description" rows="3" required
                            class="w-full bg-gray-50 border-2 border-gray-300 rounded-lg px-4 py-2 focus:ring focus:ring-blue-200 focus:border-blue-500"></textarea>
                    </div>

                    <!-- Duration -->
                    <div>
                        <label for="duration" class="block font-medium text-gray-700">Duration</label>
                        <input type="text" name="duration" id="duration" required
                            class="w-full bg-gray-50 border-2 border-gray-300 rounded-lg px-4 py-2 focus:ring focus:ring-blue-200 focus:border-blue-500">
                    </div>

                    <!-- Mode of Service -->
                    <div>
                        <label for="mode_of_service" class="block font-medium text-gray-700">Mode of Service</label>
                        <input type="text" name="mode_of_service" id="mode_of_service" required
                            class="w-full bg-gray-50 border-2 border-gray-300 rounded-lg px-4 py-2 focus:ring focus:ring-blue-200 focus:border-blue-500">
                    </div>

                    <!-- Image -->
                    <div>
                        <label for="image" class="block font-medium text-gray-700">Image</label>
                        <input type="file" name="image" id="image" accept="image/*"
                            class="w-full bg-gray-50 border-2 border-gray-300 rounded-lg px-4 py-2 focus:ring focus:ring-blue-200 focus:border-blue-500">
                    </div>

                    <!-- Price -->
                    <div>
                        <label for="price" class="block font-medium text-gray-700">Price</label>
                        <input type="number" step="0.01" name="price" id="price" required
                            class="w-full bg-gray-50 border-2 border-gray-300 rounded-lg px-4 py-2 focus:ring focus:ring-blue-200 focus:border-blue-500">
                    </div>

                    <!-- From Date -->
                    <div>
                        <label for="from_date" class="block font-medium text-gray-700">From Date</label>
                        <input type="date" name="from_date" id="from_date" required
                            class="w-full bg-gray-50 border-2 border-gray-300 rounded-lg px-4 py-2 focus:ring focus:ring-blue-200 focus:border-blue-500">
                    </div>

                    <!-- To Date -->
                    <div>
                        <label for="to_date" class="block font-medium text-gray-700">To Date</label>
                        <input type="date" name="to_date" id="to_date" required
                            class="w-full bg-gray-50 border-2 border-gray-300 rounded-lg px-4 py-2 focus:ring focus:ring-blue-200 focus:border-blue-500">
                    </div>

                    <!-- Time From -->
                    <div>
                        <label for="time_from" class="block font-medium text-gray-700">Time From</label>
                        <input type="time" name="time_from" id="time_from" required
                            class="w-full bg-gray-50 border-2 border-gray-300 rounded-lg px-4 py-2 focus:ring focus:ring-blue-200 focus:border-blue-500">
                    </div>

                    <!-- Time To -->
                    <div>
                        <label for="time_to" class="block font-medium text-gray-700">Time To</label>
                        <input type="time" name="time_to" id="time_to" required
                            class="w-full bg-gray-50 border-2 border-gray-300 rounded-lg px-4 py-2 focus:ring focus:ring-blue-200 focus:border-blue-500">
                    </div>

                    <!-- Location -->
                    <div>
                        <label for="location" class="block font-medium text-gray-700">Location</label>
                        <input type="text" name="location" id="location" required
                            class="w-full bg-gray-50 border-2 border-gray-300 rounded-lg px-4 py-2 focus:ring focus:ring-blue-200 focus:border-blue-500">
                    </div>

                    <!-- Instructor -->
                    <div>
                        <label for="instructor" class="block font-medium text-gray-700">Instructor</label>
                        <input type="text" name="instructor" id="instructor" required
                            class="w-full bg-gray-50 border-2 border-gray-300 rounded-lg px-4 py-2 focus:ring focus:ring-blue-200 focus:border-blue-500">
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="mt-4">
                    <button type="submit"
                        class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition w-full md:w-auto">
                        Submit
                    </button>
                </div>
            </form>
        </section>
    </main>

    <script>
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toISOString().split('T')[0]; // Format as yyyy-MM-dd
        }
        
        function formatTime(timeString) {
            const time = new Date(1970-01-01T${timeString});
            const hours = time.getHours().toString().padStart(2, '0');
            const minutes = time.getMinutes().toString().padStart(2, '0');
            return ${hours}:${minutes}; // Format as HH:mm
        }
        
        function editService(id, title, description, duration, mode, fromDate, toDate, timeFrom, timeTo, location, instructor, price) {
            const form = document.getElementById("serviceForm");
            document.getElementById("action").value = "edit";
            document.getElementById("service_id").value = id;
            document.getElementById("title").value = title;
            document.getElementById("description").value = description;
            document.getElementById("duration").value = duration;
            document.getElementById("mode_of_service").value = mode;
        
            // Convert and set formatted date and time values
            document.getElementById("from_date").value = formatDate(fromDate);
            document.getElementById("to_date").value = formatDate(toDate);
            document.getElementById("time_from").value = formatTime(timeFrom);
            document.getElementById("time_to").value = formatTime(timeTo);
        
            document.getElementById("location").value = location;
            document.getElementById("instructor").value = instructor;
            document.getElementById("price").value = price;
            form.scrollIntoView({ behavior: "smooth" });
        }
    </script>
</body>

</html>










































































<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Services</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        function toggleForm(formId) {
            document.getElementById('addForm').classList.add('hidden');
            document.getElementById('editForm').classList.add('hidden');
            if (formId) {
                document.getElementById(formId).classList.remove('hidden');
            }
        }

        function editService(service) {
            toggleForm('editForm');
            document.getElementById("editForm").action = `/services/edit/${service.id}/`;
            document.getElementById("editTitle").value = service.title;
            document.getElementById("editDescription").value = service.description;
            document.getElementById("editDuration").value = service.duration;
            document.getElementById("editMode").value = service.mode_of_service;
            document.getElementById("editFromDate").value = service.from_date;
            document.getElementById("editToDate").value = service.to_date;
            document.getElementById("editTimeFrom").value = service.time_from;
            document.getElementById("editTimeTo").value = service.time_to;
            document.getElementById("editLocation").value = service.location;
            document.getElementById("editInstructor").value = service.instructor;
            document.getElementById("editPrice").value = service.price;
            document.getElementById("editImage").files = [];
        }
    </script>
</head>
<body class="bg-gray-50">
    <header class="bg-green-600 text-white p-4 shadow">
        <div class="container mx-auto flex justify-between">
            <h1 class="text-xl font-bold">Manage Services</h1>
            <a href="{% url 'admin_dashboard' %}" class="hover:underline">Dashboard</a>
        </div>
    </header>

    {% if messages %}
    <div class="container mx-auto mt-4">
        {% for message in messages %}
        <div class="p-4 mb-4 rounded {% if message.tags == 'success' %}bg-green-200{% else %}bg-red-200{% endif %}">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}
    

    <main class="container mx-auto p-6">
        <div class="flex justify-between mb-4">
            <h2 class="text-2xl font-bold">Services</h2>
            <button onclick="toggleForm('addForm')" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">Add Service</button>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            {% for service in services %}
            <div class="bg-white shadow-lg rounded-lg p-4">
                <img src="{{ service.image.url }}" alt="{{ service.title }}"
                    class="rounded-t-lg object-cover w-full h-40">
                <h3 class="text-xl font-bold text-gray-700 mt-4">{{ service.title }}</h3>
                <p class="text-gray-600 mt-2">{{ service.description }}</p>
                <p class="text-gray-600">Duration: {{ service.duration }}</p>
                <p class="text-gray-600">Mode: {{ service.mode_of_service }}</p>
                <p class="text-gray-600">Location: {{ service.location }}</p>
                <p class="text-gray-600">Instructor: {{ service.instructor }}</p>
                <p class="text-gray-600">Price: ${{ service.price }}</p>
                <p class="text-gray-600">Date: {{ service.from_date }} - {{ service.to_date }}</p>
                <p class="text-gray-600">Time: {{ service.time_from }} - {{ service.time_to }}</p>
                <div class="flex justify-between items-center mt-4">
                    <!-- Delete Button -->
                    <form action="{% url 'delete_service' service.id %}" method="POST" class="inline-block">
                        {% csrf_token %}
                        <input type="hidden" name="action" value="delete">
                        <input type="hidden" name="service_id" value="{{ service.id }}">
                        <button type="submit"
                            class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition">
                            Delete
                        </button>
                    </form>
                    <!-- Edit Button -->
                    <button onclick="editService({{ service.id }}, '{{ service.title }}', '{{ service.description }}', '{{ service.duration }}', '{{ service.mode_of_service }}', '{{ service.from_date }}', '{{ service.to_date }}', '{{ service.time_from }}', '{{ service.time_to }}', '{{ service.location }}', '{{ service.instructor }}', '{{ service.price }}')"
                        class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition">
                        Edit
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>
        

        <!-- Add Form -->
        <form id="addForm" action="{% url 'add_service' %}" method="POST" enctype="multipart/form-data" class="hidden bg-white p-6 rounded-lg shadow-lg mt-6">
            {% csrf_token %}
            <h3 class="text-lg font-bold mb-4">Add Service</h3>
            <div class="mb-4">
                <label for="title" class="block text-gray-700">Title</label>
                <input type="text" id="title" name="title" class="w-full border rounded p-2">
            </div>
            <div class="mb-4">
                <label for="description" class="block text-gray-700">Description</label>
                <textarea id="description" name="description" class="w-full border rounded p-2"></textarea>
            </div>
            <div class="mb-4">
                <label for="duration" class="block text-gray-700">Duration</label>
                <input type="text" id="duration" name="duration" class="w-full border rounded p-2">
            </div>
            <div class="mb-4">
                <label for="mode" class="block text-gray-700">Mode of Service</label>
                <select id="mode" name="mode" class="w-full border rounded p-2">
                    <option value="online">Online</option>
                    <option value="offline">Offline</option>
                </select>
            </div>
            <div class="mb-4">
                <label for="from_date" class="block text-gray-700">From Date</label>
                <input type="date" id="from_date" name="from_date" class="w-full border rounded p-2">
            </div>
            <div class="mb-4">
                <label for="to_date" class="block text-gray-700">To Date</label>
                <input type="date" id="to_date" name="to_date" class="w-full border rounded p-2">
            </div>
            <div class="mb-4">
                <label for="time_from" class="block text-gray-700">Time From</label>
                <input type="time" id="time_from" name="time_from" class="w-full border rounded p-2">
            </div>
            <div class="mb-4">
                <label for="time_to" class="block text-gray-700">Time To</label>
                <input type="time" id="time_to" name="time_to" class="w-full border rounded p-2">
            </div>
            <div class="mb-4">
                <label for="location" class="block text-gray-700">Location</label>
                <input type="text" id="location" name="location" class="w-full border rounded p-2">
            </div>
            <div class="mb-4">
                <label for="instructor" class="block text-gray-700">Instructor</label>
                <input type="text" id="instructor" name="instructor" class="w-full border rounded p-2">
            </div>
            <div class="mb-4">
                <label for="price" class="block text-gray-700">Price</label>
                <input type="number" id="price" name="price" class="w-full border rounded p-2">
            </div>
            <div class="mb-4">
                <label for="image" class="block text-gray-700">Image</label>
                <input type="file" id="image" name="image" class="w-full border rounded p-2">
            </div>
            <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded-lg">Submit</button>
        </form>

        <!-- Edit Form -->
        <form id="editForm" action="{% url 'edit_service' service.id %}" method="POST" enctype="multipart/form-data" class="hidden bg-white p-6 rounded-lg shadow-lg mt-6">
            {% csrf_token %}
            <h3 class="text-lg font-bold mb-4">Edit Service</h3>
            <div class="mb-4">
                <label for="editTitle" class="block text-gray-700">Title</label>
                <input type="text" id="editTitle" name="title" class="w-full border rounded p-2">
            </div>
            <div class="mb-4">
                <label for="editDescription" class="block text-gray-700">Description</label>
                <textarea id="editDescription" name="description" class="w-full border rounded p-2"></textarea>
            </div>
            <div class="mb-4">
                <label for="editDuration" class="block text-gray-700">Duration</label>
                <input type="text" id="editDuration" name="duration" class="w-full border rounded p-2">
            </div>
            <div class="mb-4">
                <label for="editMode" class="block text-gray-700">Mode of Service</label>
                <select id="editMode" name="mode" class="w-full border rounded p-2">
                    <option value="online">Online</option>
                    <option value="offline">Offline</option>
                </select>
            </div>
            <div class="mb-4">
                <label for="editFromDate" class="block text-gray-700">From Date</label>
                <input type="date" id="editFromDate" name="from_date" class="w-full border rounded p-2">
            </div>
            <div class="mb-4">
                <label for="editToDate" class="block text-gray-700">To Date</label>
                <input type="date" id="editToDate" name="to_date" class="w-full border rounded p-2">
            </div>
            <div class="mb-4">
                <label for="editTimeFrom" class="block text-gray-700">Time From</label>
                <input type="time" id="editTimeFrom" name="time_from" class="w-full border rounded p-2">
            </div>
            <div class="mb-4">
                <label for="editTimeTo" class="block text-gray-700">Time To</label>
                <input type="time" id="editTimeTo" name="time_to" class="w-full border rounded p-2">
            </div>
            <div class="mb-4">
                <label for="editLocation" class="block text-gray-700">Location</label>
                <input type="text" id="editLocation" name="location" class="w-full border rounded p-2">
            </div>
            <div class="mb-4">
                <label for="editInstructor" class="block text-gray-700">Instructor</label>
                <input type="text" id="editInstructor" name="instructor" class="w-full border rounded p-2">
            </div>
            <div class="mb-4">
                <label for="editPrice" class="block text-gray-700">Price</label>
                <input type="number" id="editPrice" name="price" class="w-full border rounded p-2">
            </div>
            <div class="mb-4">
                <label for="editImage" class="block text-gray-700">Image</label>
                <input type="file" id="editImage" name="image" class="w-full border rounded p-2">
            </div>
            <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded-lg">Submit</button>
        </form>
    </main>
</body>
</html>
